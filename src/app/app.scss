.workspace {
  display: grid;
  grid-template-columns:
    clamp(220px, 20vw, 280px)
    clamp(280px, 28vw, 360px)
    1fr
    clamp(260px, 22vw, 340px);
  gap: 16px;
  align-items: start;
  padding: 16px;
}

.workspace.sidebar-collapsed {
  grid-template-columns: 44px clamp(280px, 28vw, 360px) 1fr clamp(260px, 22vw, 340px);
}

.workspace.validation-collapsed {
  grid-template-columns: clamp(220px, 20vw, 280px) clamp(280px, 28vw, 360px) 1fr 44px;
}

.workspace.sidebar-collapsed.validation-collapsed {
  grid-template-columns: 44px clamp(280px, 28vw, 360px) 1fr 44px;
}

:host {
  --sticky-top: 76px; // 64px Toolbar + 12px Abstand
}

.panel-left,
.panel-right {
  display: flex;
  flex-direction: column;
  gap: 12px;
  position: sticky;
  top: var(--sticky-top);
  align-self: start;
}

.panel-content {
  display: block;
}

.collapse-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 40px;
  padding: 6px 10px;
  border-radius: 10px;
  border: 1px solid rgba(0, 0, 0, 0.2);
  background: rgba(0, 0, 0, 0.04);
  color: inherit;
  font: inherit;
  cursor: pointer;
}

.collapse-toggle:focus-visible {
  outline: 3px solid #0b57d0;
  outline-offset: 2px;
}

/* Wenn eingeklappt: Toggle als schmale, vertikale Leiste */
.workspace.sidebar-collapsed .panel-left .collapse-toggle,
.workspace.validation-collapsed .panel-right .collapse-toggle {
  writing-mode: vertical-rl;
  text-orientation: mixed;
  width: 44px;
  padding: 10px 6px;
}

.left {
  display: flex;
  flex-direction: column;
  gap: 16px;
  position: sticky;
  top: var(--sticky-top);
  align-self: start;
  max-height: calc(100vh - var(--sticky-top) - 12px);
  overflow: auto;
}

.error {
  margin: 12px 16px;
  padding: 12px;
  border: 1px solid #b00020;
  background: #fde7e9;
  color: #5f0010;
}

app-layout {
  position: sticky;
  top: var(--sticky-top);
  align-self: start;
}

@media (max-width: 1100px) {
  .workspace,
  .workspace.sidebar-collapsed,
  .workspace.validation-collapsed,
  .workspace.sidebar-collapsed.validation-collapsed {
    grid-template-columns: 1fr;
  }

  .panel-left {
    order: 1;
  }

  .left {
    order: 2;
    position: static;
    max-height: none;
    overflow: visible;
  }

  app-layout {
    order: 3;
    position: static;
    max-height: none;
    overflow: visible;
  }

  .panel-right {
    order: 4;
  }

  .collapse-toggle {
    writing-mode: horizontal-tb;
    width: auto;
  }
}
